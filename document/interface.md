# 接口文档
> 日期：2016年 9月 26日 15点 10分

### 接口数据格式定义说明
C -> S(客户端到服务器)

S -> C(服务器到客户端)

### 资源的访问控制
* 静态资源
> 通过登录用户的session控制访问

* 服务接口
> 通过session验证[s]+sessionName
> 通过token验证[t]+tokenName+len
> 通过code验证[c]+codeName+len
> 不需要null验证[n]


### 用户接口
登陆(未登录)
```
{
	name:/cyzm6/public/user/login,
	method:post,
    arg:[
        {name:email,type:string,max-len:128},
        {name:pwd,type:string,min-len:6,max-len:128},
        {name:code,type:string,length:4}
    ]
    return:[
        {code:0}|
        {code:1}|
        {code:2}|
        {code:3}|
        {code:9}
    ]
}
```
注册(未登录)

```
{
    name:/cyzm6/public/user/regist,
    method:post,
    arg:[
        {name:name,type:string,min-len:1,max-len:128},
        {name:pwd,type:string,min-len:6,max-len:128},
        {name:email,type:string},
        {name:age,type:int,range:0-150},
        {name:sex:,type:int,range:0-3},
        {name:token,type:string,length:16}
    ],
    return:[
        {code:0}|
        {code:1}|
        {code:4}
    ]
}
```
修改密码(登录)
```
{
    name:/suser/private/user/modifypwd,
    method:post,
    arg:[
        {name:oldpwd,type:string,min-len:6,max-len:128},
        {name:newpwd,type:string,min-len:6,max-len:128}
    ],
    return:[
        {code:-1}|
        {code:1}|
        {code:3}
    ]
}
```
更换邮箱(登录)
```
发送请求得到验证码
{
    name:/suser/cyzm6/private/user/modifyemail1,
    method:post,
    return:[
        {code:0},
        {code:1}
    ]
}
填写验证码，并发送新的邮箱
{
    name:/suser/cyzm6/private/user/modifyemail2,
    method:post,
    arg:[
        {name:email,type:string},
        {name:code,type:string}
    ]，
    return:[
        {code:-1}|
        {code:1}|
        {code:5}
    ]
}
```
密码找回(未登录)
```
1.发送找回请求
{
    name:/cyzm6/public/user/findpwd1,
    method:post,
    arg:[
        {name:email,type:string},
        {name:code,type:string,len:4}
    ],
    return:[
        {code:0},
        {code:1}，
        {code:6}
    ]
}
2.成功后修改密码
{
    name:/sfind/public/user/findpwd2,
    method:post,
    arg:[
        {name:newpwd,type:string,min-len:6,max-len:128},
        {name:code,type:string,len:6}
    ]
    return:[
        {code:0}|
        {code:1}
    ]
}
```
---
修改个性签名(登录)
```
{
    name:/suser/private/user/modifysign,
    method:get,
    arg:[
        {name:words,type:string,min-len:1,max-len:128}
    ],
    return:[
        {code:0}|
        {code:1}|
        {code:7}
    ]
}
```
修改用户名(登录)
```
{
    name:/suser/private/user/modifyname,
    method:get,
    arg:[
        {name:name,type:string,min-len:1,max-len:128}
    ],
    return:[
        {code:0}|
        {code:1}|
        {code:7}
    ]
}
```
修改头像(登录)
```
{
    name:/suser/private/user/uploadhead,
    method:post,
    arg:[
        
    ],
    return:[
        {code:0}|
        {code:1}
    ]
}
```
修改年龄(登录)
```
{
    name:/suser/private/user/modifyage,
    method:get,
    arg:[
        {name:age,type:int,min:0,max:200}
    ],
    return:[
        {code:0}|
        {code:1}
    ]
}
```
性别修改(登录)
```
{
    name:/suser/private/user/modifysex,
    method:get,
    arg:[
        {name:sex,type:int,min:0,max:2}
    ],
    return:[
        {code:0}|
        {code:1}
    ]
}
```
---
添加好友(登录)
```
{
    name:/suser/private/friend/add,
    method:get,
    arg:[
        {name:fid,type:string}
    ],
    return:[
        {code:0}|
        {code:1}
    ]
}
```
好友搜索(登录)
```
以昵称的搜索方式
{
    name:/private/friend/searchname,
    method:get,
    arg:[
        {name:name,type:string}
    ],
    return:[
        {code:0}|
        {code:1,data:[{id:"",name:"","remark":""}]}
    ]
}
以用户ID的搜索方式(登录)
{
    name:/suser/private/friend/searchid,
    method:get,
    arg:[
        {name:id,type:string}
    ],
    return:[
        {code:0}|
        {code:1,data:{id:"",name:"","remark":""}}
    ]
}
```
删除好友(登录)
```
{
    name:/suser/private/friend/delete,
    method:get,
    arg:[
        {name:id,type:string}
    ],
    return:[
        {code:0}|
        {code:1}
    ]
}
```
备注的修改(登录)
```
{
    name:/suser/private/friend/modifyrm,
    method:get,
    arg:[
        {name:nickname,type:string}
    ],
    return:[
        {code:0}|
        {code:1}
    ]
}
```
获取好友列表信息(登录)
```
{
    name:/suser/private/friend/getlist,
    method:post,
    arg:[
        {name:time,type:long,describe:"返回某个时间点之后的"}
    ],
    return:[
        {code:0}|
        {code:1,data:[{"id" : "","name":"",remark":"","socket":""}]}
    ]
}
```
